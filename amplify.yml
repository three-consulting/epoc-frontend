version: 1
frontend:
    phases:
        preBuild:
            commands:
                - yarn install
        build:
            commands:
                - yarn run build
                - COGNITO_CLIENT_ID=${COGNITO_CLIENT_ID}
                - COGNITO_CLIENT_SECRET=${COGNITO_CLIENT_SECRET}
                - COGNITO_DOMAIN=${COGNITO_DOMAIN}
                - NEXTAUTH_URL=${NEXTAUTH_URL}
    artifacts:
        baseDirectory: .next
        files:
            - '**/*'
    cache:
        paths:
            - node_modules/**/*
